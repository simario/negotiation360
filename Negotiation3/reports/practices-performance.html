<!doctype html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" href="css/bootstrap.css" />
	<link rel="stylesheet" href="css/style.css" />
  <style type="text/css">

  body {
      background-position: top left;
      background-repeat: no-repeat;
      background-size: 100%;
	    background-color: #efeff4
  }

	canvas{
	  width: 100% !important;
      max-width: 300px;
      height: 100% !important;
	}
	header {
	  position:absolute;
	  z-index:0;
	  top:0; left:0; right:0;
	  height:10rem;
	  transition:transform .5s, opacity .3s;
	  background-size:cover;
	}

	.card {
	  padding:0.5rem 1rem;
	  box-shadow:0 1px 2px #aaa;
	  background:white;
	  margin: 1.5rem 1rem;
	  border-radius:1px;
	  user-select:none;
	  animation:fly-in-from-left .5s 1s ease both;
	  transform-origin:top left;
	}
	.card:nth-child(even){
	  animation-name:fly-in-from-right;
	  animation-delay:1.1s;
	 transform-origin:top right;
	}

	@keyframes fly-in-from-left {
	  from {
	    transform:translateY(15rem) rotate(15deg);
	    opacity:0;
	  }
	}

	@keyframes fly-in-from-right {
	  from {
	    transform:translateY(15rem) rotate(-15deg);
	    opacity:0;
	  }
	}

	.card:after {
	  position:absolute;
	  font-size:.9rem;
	  top:1.5rem;
	  right:1rem;
	  border:thin solid gray;
	  color:gray;
	  width:1rem;
	  line-height:1rem;
	  text-align:center;
	  border-radius:50%;
	  pointer-events:none;
	}

	h1 {
	  font-size:2rem;
	  font-weight:200;
	  margin-top:11px;
	}
	  strong {
	    font-weight:500;
	    color:#ff9f33;
	  }

	h2 {
	  font-size:1.25rem;
	  color:#ff9f33;
	  font-weight:400;
	  margin-top:-10px;
	}

  </style>


</head>
<body>	
	<section class="card">
		<h1>Agreement Rate</h1> 
		<h2 id="subtitle"></h2>
		<canvas id="canvas"></canvas>
	</section>

	<section class="card">
		<h1>Negotiation Type</h1> 
		<h2 id="subtitle2"></h2>
		<canvas id="canvas2"></canvas>
	</section>

	<section class="card">
		<h1>Importance &amp; Satisfaction</h1> 
		<h2 id="subtitle3"></h2>
		<canvas id="canvas3"></canvas>
	</section>

	<section class="card">
		<h1>Profile Metrics</h1> 
		<h2 id="subtitle4"></h2>
		<canvas id="canvas4"></canvas>
	</section>
	
	<div style="height:100px">
	</div>
<!--    <div id="debug" style="color:#000;"></div>-->
        
	
  <script src="jquery.js"></script>
  <script src="Chart.js"></script>
  <script>

	$(function () {

	    $(document).ready(function () {
                          /*
                           var numScorecards = 5;
                           var yesCount = 2;
                           var noCount = 2;
                           var notYetCount = 1;
                           var proOutsidePartiesCount = 1;
                           var proColleaguesCount = 2;
                           var personalCount = 1;
                           var communityCount = 1;
                           var familyCount = 0;
                           var dates = [ '10/28/14', '10/28/14', '10/28/14', '10/28/14', '10/28/14'];
                           var importance = [ 50, 99, 57, 68, 68];
                           var satisfaction = [ 50, 1, 12, 20, 30];
                           var names = [ 'sadf', 'My Fourth Negotiation', 'My Third Negotiation', 'My Second Negotiation', 'My First Negotiation'];
                           var scorecardsUsed = 0;
                           var averageCreatingValue = 1.000000;
                           var averageEmpathy = 1.000000;
                           var averageClaimingValue = 1.000000;
                           var averageAssert = 2.000000;
                           */
                          
          %@
          
                          
                          
          /*var debug ='numScorecards = ' + numScorecards + '<br/>' +
            'yesCount = ' + yesCount + '<br/>' +
            'noCount = ' + noCount + '<br/>' +
            'notYetCount = ' + notYetCount + '<br/>' +
            'proOutsidePartiesCount = ' + proOutsidePartiesCount + '<br/>' +
            'proColleaguesCount = ' + proColleaguesCount + '<br/>' +
            'personalCount = ' + personalCount + '<br/>' +
            'communityCount = ' + communityCount + '<br/>' +
            'familyCount = ' + familyCount + '<br/>' +
            'dates = ' + dates + '<br/>' +
            'importance = ' + importance + '<br/>' +
            'satisfaction = ' +  satisfaction + '<br/>' +
            'names = ' + names + '<br/>' +
            'scorecardsUsed = ' + scorecardsUsed + '<br/>' +
            'averageCreatingValue = ' + averageCreatingValue + '<br/>' +
            'averageEmpathy = ' + averageEmpathy + '<br/>' +
            'averageClaimingValue = ' + averageClaimingValue + '<br/>' +
            'averageAssert = ' + averageAssert;

                          $('#debug').html(debug);*/
                          
            
           var subtitle ='Last ' + numScorecards + ' scorecards created'
           $('#subtitle').html(subtitle);
           $('#subtitle2').html(subtitle);
           $('#subtitle3').html(subtitle);
           $('#subtitle4').html(subtitle);


	        // Build the chart
			var agreementPieData = [
					{
						value: yesCount,
						color: "#2ee478",
						highlight: "#58E993",
						label: "Yes",
					},
					{
						value: noCount,
						color:"#DF5353",
						highlight: "#E57575",
						label: "No"
					},
					{
						value: notYetCount,
						color:"#ff9f33",
						highlight: "#FFB25C",
						label: "Not Yet"
					}
				];

			var typePieData = 	[
					{
						value: proOutsidePartiesCount,
						color:"#ff9f33",
						highlight: "#FFB25C",
						label: "Prof (Outside)",
					},
					{
						value: proColleaguesCount,
						color: "#445ae1",
						highlight: "#697BE7",
						label: "Prof (Inside)"
					},
					{
						value: personalCount,
						color: "#2ee478",
						highlight: "#58E993",
						label: "Personal"
					},
					{
						value: communityCount,
						color:"#DF5353",
						highlight: "#E57575",
						label: "Community",
					},
					{
						value: familyCount,
						color: "#aaeeee",
						highlight: "#BBF1F1",
						label: "Family"
					}
				];

			var importanceBarData = {
					labels : dates,
					datasets : [
						{
							label : "Importance",
							fillColor : "#ff9f33",
							strokeColor : "#ff9f33",
							highlightFill: "#FFB25C",
							highlightStroke: "#FFB25C",
							data : importance
						},
						{
							label : "Satisfaction",
							fillColor : "#445ae1",
							strokeColor : "#445ae1",
							highlightFill : "#697BE7",
							highlightStroke : "#697BE7",
							data : satisfaction
						}
					]

				};

			var metricBarData = {
					labels : ["Create", "Assert", "Empathy", "Claim"],
					datasets : [
						{
							fillColor : "#ff9f33",
							strokeColor : "#ff9f33",
							highlightFill: "#FFB25C",
							highlightStroke: "#FFB25C",
							data : [averageCreatingValue,averageEmpathy,averageClaimingValue,averageAssert]
						}
					]

				};


				window.onload = function(){
					var ctx = document.getElementById("canvas").getContext("2d");
					window.myPieChart = new Chart(ctx).Pie(agreementPieData);
					var ctx2 = document.getElementById("canvas2").getContext("2d");
					window.myPieChart = new Chart(ctx2).Pie(typePieData);
					var ctx3 = document.getElementById("canvas3").getContext("2d");
					window.myBarChart = new Chart(ctx3).Bar(importanceBarData,{
						responsive: false,
						maintainAspectRatio: true,
					    showScale: true,
					    scaleOverride: true,
					    scaleSteps: 5,
					    scaleStepWidth: 20,
					    scaleStartValue: 0
					});
					var ctx4 = document.getElementById("canvas4").getContext("2d");
					window.myBarChart = new Chart(ctx4).Bar(metricBarData,{
						responsive: false,
						maintainAspectRatio: true,
					    showScale: true,
					    scaleOverride: true,
					    scaleSteps: 5,
					    scaleStepWidth: 1,
					    scaleStartValue: 0
					});

			}

	    });
	});

  </script>
</body>
</html>
